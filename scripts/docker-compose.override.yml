services:
  # Databases
  postgres:
    profiles: ["mvp"]
    ports:
      - "5432:5432"
  postgis:
    profiles: ["mvp"]
    ports:
      - "5433:5432"
  redis:
    profiles: ["mvp"]
    ports:
      - "6379:6379"
  # Message Queue
  zookeeper:
    profiles: ["mvp"]
    ports:
      - "2181:2181"
  kafka:
    profiles: ["mvp"]
    ports:
      - "9092:9092"
    environment:
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:9092
      KAFKA_LISTENERS: PLAINTEXT://0.0.0.0:9092
      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT
  # Backend Services
  api-gateway:
    profiles: ["mvp"]
    ports:
      - "8080:8080"
  iam-service:
    profiles: ["mvp"]
    ports:
      - "8101:8081"
  risk-assessment:
    profiles: ["mvp"]
    ports:
      - "8082:8082"
  news-aggregator:
    profiles: ["mvp"]
    ports:
      - "8083:8083"
  ingestion-service:
    profiles: ["mvp"]
    ports:
      - "8084:8084"
  normalization-service:
    profiles: ["mvp"]
    ports:
      - "8085:8085"
  audit-logging:
    profiles: ["mvp"]
    ports:
      - "8086:8086"
  # Frontend
  frontend:
    profiles: ["mvp"]
    ports:
      - "3000:3000"
    environment:
      NODE_ENV: development
  graph-intelligence:
    profiles: ["mvp"]
    ports:
      - "8089:8089"
  neo4j:
    profiles: ["mvp"]
    ports:
      - "7474:7474"
      - "7687:7687"
  mlflow:
    profiles: ["mvp"]
    ports:
      - "5000:5000"
  model-serving:
    profiles: ["mvp"]
    ports:
      - "8091:8091"